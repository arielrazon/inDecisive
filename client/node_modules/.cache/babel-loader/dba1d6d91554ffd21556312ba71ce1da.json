{"ast":null,"code":"import _regeneratorRuntime from\"/Users/arielrazon/Desktop/big_coding_projects/in_decisive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/arielrazon/Desktop/big_coding_projects/in_decisive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/arielrazon/Desktop/big_coding_projects/in_decisive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/arielrazon/Desktop/big_coding_projects/in_decisive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/arielrazon/Desktop/big_coding_projects/in_decisive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/arielrazon/Desktop/big_coding_projects/in_decisive/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import{Button,Form,Grid,Header,Image,Message,Segment}from'semantic-ui-react';import PSlogo from\"./logo_icon.png\";import\"./SignIn.css\";import{Redirect}from\"react-router-dom\";/* import Button from \"../../components/Button\";\nimport { Input } from \"../../components/Form\";\nimport { Col, Row, Container } from \"../../components/Grid\";  */var SignIn=/*#__PURE__*/function(_Component){_inherits(SignIn,_Component);var _super=_createSuper(SignIn);function SignIn(){var _this;_classCallCheck(this,SignIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:\"\",email:\"\",password:\"\",redirect:false};_this.setRedirect=function(){_this.setState({redirect:true});};_this.submit=function(){_this.callApi().catch(function(err){return console.log(err);});console.log(_this.state.response);};_this.callApi=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/member/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"email\":document.getElementById('email').value,\"password\":document.getElementById('password').value})}).then(function(response){if(response.ok){response.json().then(function(json){console.log(json);localStorage.setItem('jwtToken',json.token);_this.setRedirect();});}else if(response.status!==200){response.json().then(function(json){_this.setState({response:JSON.stringify(json)});console.log(json);});console.log(response);throw Error(response.message);}});case 2:case\"end\":return _context.stop();}}},_callee);}));_this.renderRedirect=function(){if(_this.state.redirect){return/*#__PURE__*/_jsx(Redirect,{to:\"/search\"});}};return _this;}_createClass(SignIn,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n                    body > div,\\n                    body > div > div,\\n                    body > div > div > div.login-form {\\n                    height: 100%;}\\n                \"}),/*#__PURE__*/_jsx(Grid,{textAlign:\"center\",style:{height:'100%'},verticalAlign:\"middle\",children:/*#__PURE__*/_jsxs(Grid.Column,{style:{maxWidth:450},children:[/*#__PURE__*/_jsxs(Header,{as:\"h1\",textAlign:\"center\",id:\"headertitle\",children:[/*#__PURE__*/_jsx(Image,{src:PSlogo}),\" Log-in to your account\"]}),/*#__PURE__*/_jsx(Form,{size:\"large\",children:/*#__PURE__*/_jsxs(Segment,{stacked:true,children:[/*#__PURE__*/_jsx(Form.Input,{fluid:true,icon:\"mail\",iconPosition:\"left\",placeholder:\"E-mail address\",className:\"forminputz\",id:\"email\"}),/*#__PURE__*/_jsx(Form.Input,{fluid:true,icon:\"lock\",iconPosition:\"left\",placeholder:\"Password\",type:\"password\",className:\"forminputz\",id:\"password\"}),/*#__PURE__*/_jsxs(\"div\",{children:[this.renderRedirect(),/*#__PURE__*/_jsx(Button,{fluid:true,size:\"large\",id:\"signInButton\",onClick:this.submit,children:\"Log-in\"})]})]})}),/*#__PURE__*/_jsxs(Message,{id:\"datMessage\",children:[\"New to us? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Sign Up!\"})]})]})})]});}}]);return SignIn;}(Component);export default SignIn;","map":{"version":3,"sources":["/Users/arielrazon/Desktop/big_coding_projects/in_decisive/client/src/pages/SignIn/SignIn.js"],"names":["React","Component","Button","Form","Grid","Header","Image","Message","Segment","PSlogo","Redirect","SignIn","state","name","email","password","redirect","setRedirect","setState","submit","callApi","catch","err","console","log","response","fetch","method","headers","body","JSON","stringify","document","getElementById","value","then","ok","json","localStorage","setItem","token","status","Error","message","renderRedirect","height","maxWidth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Button, Form, Grid, Header, Image, Message, Segment } from 'semantic-ui-react';\nimport PSlogo from \"./logo_icon.png\";\nimport \"./SignIn.css\";\nimport { Redirect } from \"react-router-dom\";\n/* import Button from \"../../components/Button\";\nimport { Input } from \"../../components/Form\";\nimport { Col, Row, Container } from \"../../components/Grid\";  */\n\nclass SignIn extends Component {\n\n    state = {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        redirect: false\n    };\n\n    setRedirect = () => {\n        this.setState({\n            redirect: true\n        })\n    };\n\n    submit = () => {\n        this.callApi()\n      .catch(err => console.log(err));\n      console.log(this.state.response);\n    }\n\n    callApi = async () => {\n        await fetch('/api/member/login', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n            \"email\" : document.getElementById('email').value,\n            \"password\" : document.getElementById('password').value\n            })\n        }).then(response => {\n            if (response.ok) {\n              response.json().then(json => {   \n                \n                console.log(json)  \n                localStorage.setItem('jwtToken', json.token);\n                this.setRedirect();\n              });\n            } \n            \n            else if (response.status !== 200) {\n                response.json().then(json => {\n                    this.setState({response: JSON.stringify(json)});\n                    console.log(json);\n                });\n                console.log(response);\n                throw Error(response.message);\n            }\n          });  \n      };\n\n    renderRedirect = () => {\n        if (this.state.redirect) {\n            return <Redirect to='/search' />\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"login-form\">\n                <style>{`\n                    body > div,\n                    body > div > div,\n                    body > div > div > div.login-form {\n                    height: 100%;}\n                `}\n                </style>\n                <Grid textAlign='center' style={{ height: '100%'}} verticalAlign='middle'>\n                    <Grid.Column style={{ maxWidth: 450 }}>\n                        <Header as='h1' textAlign='center' id=\"headertitle\">\n                            <Image src={PSlogo} /> Log-in to your account\n                        </Header>\n                        <Form size='large'>\n                            <Segment stacked>\n                                <Form.Input fluid icon='mail' iconPosition='left' placeholder='E-mail address' className=\"forminputz\" id=\"email\"/>\n                                <Form.Input\n                                fluid\n                                icon='lock'\n                                iconPosition='left'\n                                placeholder='Password'\n                                type='password'\n                                className=\"forminputz\"\n                                id=\"password\"\n                                />\n                                <div>\n                                    {this.renderRedirect()}\n                                    <Button fluid size='large' id=\"signInButton\" onClick={this.submit}>\n                                    Log-in\n                                </Button>\n                                </div>\n                            </Segment>\n                        </Form>\n                        <Message id=\"datMessage\">\n                            New to us? <a href=\"/signup\">Sign Up!</a>\n                        </Message>\n                    </Grid.Column>\n                </Grid>\n            </div>\n        )\n    }\n}\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}